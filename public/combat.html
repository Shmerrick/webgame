<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Game Simulator - Combat System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
    <script src="aspect_ratio.js"></script>
  <script>
      tailwind.config = {
        theme: {
          extend: {
            screens: {
              "aspect-ultrawide": { "raw": "[data-aspect-ratio='ultrawide']" },
              "aspect-widescreen": { "raw": "[data-aspect-ratio='widescreen']" },
              "aspect-mobile": { "raw": "[data-aspect-ratio='mobile']" },
            },
          },
        },
      };
    document.documentElement.classList.add("dark");
  </script>
  <style>
    :root { color-scheme: dark; }
    body { background: #0f172a; color: #e2e8f0; margin: 0; }
    h2 { margin-top: 1.5rem; margin-bottom: 1rem; }
    h3 { margin-top: 1rem; margin-bottom: 0.5rem; }
    ul { margin-left: 1.5rem; list-style-type: '— '; }
    li { margin-bottom: 0.5rem; }
    code { background-color: #1e293b; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-family: monospace; }
    section { transition: all 0.2s ease-in-out; }
    section:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    h2 { margin-bottom: 1.5rem; }
    h3 { margin-top: 1.5rem; margin-bottom: 1rem; }
        [data-aspect-ratio='ultrawide'] #materials-container {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      [data-aspect-ratio='widescreen'] #materials-container {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    </style>
</head>
  <body style="background-image: url('Art/Backgrounds/volcano.png'); background-size: cover; background-attachment: fixed;">
    <div class="min-h-screen w-full bg-slate-950/80 text-slate-100 p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
      <nav class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4 shadow-lg mb-6">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <div class="text-xl font-bold tracking-tight">Game Simulator</div>
            <span id="version-display" class="text-sm text-slate-400"></span>
          </div>
          <button id="menu-toggle" class="md:hidden px-2 py-1 text-slate-300 hover:text-emerald-400 border border-slate-700 rounded">Menu</button>
          <div id="nav-links" class="hidden w-full flex-col gap-2 mt-4 md:mt-0 md:flex md:flex-row md:flex-wrap md:gap-4 md:w-auto">
            <a href="index.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Home</a>
            <a href="materials.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Materials</a>
            <a href="simulator.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Simulator</a>
            <a href="combat.html" class="px-2 py-1 text-emerald-400 font-semibold">Combat</a>
            <a href="movement.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Movement</a>
            <a href="races.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Races</a>
            <a href="ascension.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Ascension</a>
            <a href="magic.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Magic</a>
            <a href="spells.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Spells</a>
            <a href="crafting.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Crafting</a>
            <a href="siege.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Siege</a>
            <a href="materials_guide.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Materials Guide</a>
            <a href="game_systems.html" class="px-2 py-1 text-slate-300 hover:text-emerald-400">Game Systems</a>
          </div>
        </div>
      </nav>

      <header class="text-center">
        <h1 class="text-4xl font-bold tracking-tight mb-4">Core & Combat Systems</h1>
        <p class="text-lg text-slate-300 break-words">
          Learn how core character statistics interact with combat mechanics.
        </p>
      </header>

      <main class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="flex flex-col gap-8">
          <section id="core-stats" class="bg-slate-900/60 border border-slate-800 rounded-2xl p-6 shadow-lg">
        <h2 class="text-3xl font-bold border-b border-slate-700 pb-2 mb-4">Core Stats System</h2>

            <h3 class="text-2xl font-semibold mt-4">Attributes (Range: 0–100)</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Strength:</strong> Increases melee damage and allows the user to use heavier shields and armor. It also allows the player to use higher draw strength bows and crossbow.</li>
            <li><strong>Dexterity:</strong> Increases stamina
              <br><code>Formula: Stamina = 100 + (Dexterity × 2)</code>
            </li>
            <li><strong>Intelligence:</strong> Increases magic damage</li>
            <li><strong>Psyche:</strong> Increases mana
              <br><code>Formula: Mana = 100 + (Psyche × 2)</code>
            </li>
            <li><strong>Health:</strong> Fixed at 200</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Stat Pool</h3>
          <p class="text-slate-300">Total available points: ~270</p>

          <h3 class="text-2xl font-semibold mt-6">Scaling</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>0–50:</strong> 1 point → 1 stat</li>
            <li><strong>51–80:</strong> 2 points → 1 stat</li>
            <li><strong>81–90:</strong> 3 points → 1 stat</li>
            <li><strong>91–100:</strong> 4 points → 1 stat</li>
          </ul>
          </section>
        <!-- Example builds removed for brevity -->
      </div>

      <div class="flex flex-col gap-8">
        <section id="combat-system" class="bg-slate-900/60 border border-slate-800 rounded-2xl p-6 shadow-lg">
          <h2 class="text-3xl font-bold border-b border-slate-700 pb-2 mb-4">Combat System – Summary</h2>

          <h3 class="text-2xl font-semibold mt-4">Tunable Knobs</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>MSF (Mass Stamina Factor):</strong> 1.0 stamina / kg</li>
            <li><strong>BlockFailPenalty (wrong direction):</strong> 1.0 incoming damage</li>
            <li><strong>RangedBlockPenalty (arrows/bolts, non-directional):</strong> 1.0 incoming damage</li>
            <li><strong>Block Arc:</strong> 1.0° frontal</li>
            <li><strong>Parry Immunity:</strong> 1.0 s, melee weapon attacks only</li>
            <li><strong>Riposte State:</strong> Grants 1.0 damage reduction only if the player is in an attack state. Buff multiplies charge & swing times by 1.0 (full damage still). UI indicator.</li>
            <li><strong>Lockout:</strong> Triggered when player attempts to block. If no attack is blocked within 1.0 s → return to idle + 1.0 s reblock penalty. Dropping block early still incurs the 1.0 s penalty.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Weapon Model</h3>
          <ul class="list-disc text-slate-300">
            <li>Two parts: Shaft/Hilt (handle) + Weapon Head (blade, spike, hammer, etc.).</li>
            <li>Mass = Shaft/Hilt + Head.</li>
            <li>Damage types: Blunt (from total weapon mass, always present), Slash / Pierce (from head only).</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Attack Directions</h3>
          <ul class="list-disc text-slate-300">
            <li>Directions: Left, Right, Up, Down.</li>
            <li>Each weapon has a direction table mapping attack direction → damage type(s). For instance, a sword uses Left, Right, Up → Slash and Down → Pierce.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Special Weapons</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Lance (mounted-only):</strong> No ready/swing cycle. Full damage on contact. Damage = (Blunt + Pierce) × PlayerStrength × MountSpeedFactor. Shield = 0 damage always.</li>
            <li><strong>Bow:</strong> Pierce only. Draw Weight replaces Player Strength. No weapon mass contribution. Hold limit removed → drains stamina continuously.</li>
            <li><strong>Crossbow:</strong> Same as bow but lower draw power and no hold penalty.</li>
            <li><strong>Sling:</strong> Can be used in either hand and may occupy the offhand while another weapon is in the main hand.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Timing, Charge & Anti-Acceleration</h3>
          <ul class="list-disc text-slate-300">
            <li>Swing duration: 1.0 s (neutral → pre-release)</li>
            <li>Hold limit (melee only): 1.0 s, then reset to neutral</li>
            <li>Charge multiplier (linear): ≤1.0 s → 0 damage; 1.0–1.0 s → (charge − 1.0)/1.0; 1.0 s → 1.0</li>
            <li>Anti-acceleration cutoff: If swing < 1.0 s → 0 damage, otherwise multiplier = swing completion %</li>
            <li>Riposte timing tweak: Charge & swing times ×1.0, still full damage. Anti-accel cutoff 1.0 s.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Damage Formulas</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Melee:</strong><br>PlayerStrength × (Blunt + Slash/Pierce) × ChargeMult × SwingMult.</li>
            <li><strong>Bow / Crossbow:</strong><br>DrawWeight × Pierce × ChargeMult × SwingMult.</li>
            <li><strong>Lance:</strong><br>(Blunt + Pierce) × PlayerStrength × MountSpeedFactor.</li>
            <li><strong>Post-calculation rule:</strong><br>All float damage values floored to integers.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Defense</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Shield:</strong><br>Always nullifies incoming damage.</li>
            <li><strong>Directional Block:</strong><br>Correct direction → 0 damage, +1.0 stamina. Wrong direction → 1.0 damage.</li>
            <li><strong>Non-directional attacks:</strong><br>Lance vs shield → 0 damage. Bow/Crossbow vs block → 1.0 damage.</li>
            <li><strong>Parry:</strong><br>1.0 s immunity vs melee. Opens Riposte.</li>
            <li><strong>Riposte:</strong><br>1.0 s buff, 1.0 damage reduction while attacking, attack times ×1.0.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Stamina</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Attack costs:</strong> Light: 1.0, Medium: 1.0, Heavy: 1.0. TotalCost = Base + (MSF × mass).</li>
            <li><strong>Defense costs:</strong> Block: 1.0, Parry: 1.0.</li>
            <li><strong>Exhaustion:</strong> If stamina < 0 → stunned 1.0 s, regen ×1.0.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Heavy Attacks</h3>
          <ul class="list-disc text-slate-300">
            <li>If landed → target gets Dazed (no Riposte, suspended recovery, doubled costs).</li>
            <li>Attacker cannot perform another heavy for 3 s.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Damage & Weapon Data Rules</h3>
           <ul class="list-disc text-slate-300">
            <li>On crafting: Calculate and save Blunt, Slash, Pierce damage values.</li>
            <li>Runtime: Combat uses stored integer values for performance.</li>
          </ul>
        </section>
      </div>
    </main>
    </div>
  </div>
  <script src="nav.js"></script>
  <script src="version.js"></script>
</body>
</html>
