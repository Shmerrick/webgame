<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Game Simulator - Combat System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
    <script src="aspect_ratio.js"></script>
  <script>
      tailwind.config = {
        theme: {
          extend: {
            screens: {
              "aspect-ultrawide": { "raw": "[data-aspect-ratio='ultrawide']" },
              "aspect-widescreen": { "raw": "[data-aspect-ratio='widescreen']" },
              "aspect-mobile": { "raw": "[data-aspect-ratio='mobile']" },
            },
          },
        },
      };
    document.documentElement.classList.add("dark");
  </script>
  <style>
    :root { color-scheme: dark; }
    body { background: #0f172a; color: #e2e8f0; margin: 0; }
    h2 { margin-top: 1.5rem; margin-bottom: 1rem; }
    h3 { margin-top: 1rem; margin-bottom: 0.5rem; }
    ul { margin-left: 1.5rem; }
    li { margin-bottom: 0.25rem; }
    code { background-color: #1e293b; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-family: monospace; }
        [data-aspect-ratio='ultrawide'] #materials-container {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      [data-aspect-ratio='widescreen'] #materials-container {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    </style>
</head>
<body>
  <div class="min-h-screen w-full bg-slate-950 text-slate-100 p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
      <nav class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4 shadow-lg mb-6">
        <div class="flex items-center justify-between flex-wrap">
          <div class="text-xl font-bold tracking-tight">Game Simulator</div>
          <div class="flex flex-wrap gap-4">
            <a href="index.html" class="text-slate-300 hover:text-emerald-400">Home</a>
            <a href="materials.html" class="text-slate-300 hover:text-emerald-400">Materials</a>
            <a href="simulator.html" class="text-slate-300 hover:text-emerald-400">Simulator</a>
            <a href="combat.html" class="text-emerald-400 font-semibold">Combat</a>
            <a href="movement.html" class="text-slate-300 hover:text-emerald-400">Movement</a>
            <a href="races.html" class="text-slate-300 hover:text-emerald-400">Races</a>
            <a href="ascension.html" class="text-slate-300 hover:text-emerald-400">Ascension</a>
            <a href="magic.html" class="text-slate-300 hover:text-emerald-400">Magic</a>
            <a href="crafting.html" class="text-slate-300 hover:text-emerald-400">Crafting</a>
            <a href="materials_guide.html" class="text-slate-300 hover:text-emerald-400">Materials Guide</a>
          </div>
        </div>
      </nav>

      <header class="text-center">
        <h1 class="text-4xl font-bold tracking-tight mb-4">Core & Combat Systems</h1>
        <p class="text-lg text-slate-300 break-words">
          This document covers the core character statistics and the combat system.
        </p>
      </header>

      <main class="mt-10 bg-slate-900/60 border border-slate-800 rounded-2xl p-6 shadow-lg break-words">

        <section id="core-stats">
          <h2 class="text-3xl font-bold border-b border-slate-700 pb-2">üìñ Core Stats System</h2>

          <h3 class="text-2xl font-semibold mt-4">Attributes (Range: 0‚Äì100)</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Strength:</strong> Increases melee damage and allows the user to use heavier shields and armor. It also allows the player to use higher draw strength bows and crossbow.</li>
            <li><strong>Dexterity:</strong> Increases stamina
              <br><code>Formula: Stamina = 100 + (Dexterity √ó 2)</code>
            </li>
            <li><strong>Intelligence:</strong> Increases magic damage</li>
            <li><strong>Psyche:</strong> Increases mana
              <br><code>Formula: Mana = 100 + (Psyche √ó 2)</code>
            </li>
            <li><strong>Health:</strong> Fixed at 200</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">Stat Pool</h3>
          <p class="text-slate-300">Total available points: ~270</p>

          <h3 class="text-2xl font-semibold mt-6">Scaling</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>0‚Äì50:</strong> 1 point ‚Üí 1 stat</li>
            <li><strong>51‚Äì80:</strong> 2 points ‚Üí 1 stat</li>
            <li><strong>81‚Äì90:</strong> 3 points ‚Üí 1 stat</li>
            <li><strong>91‚Äì100:</strong> 4 points ‚Üí 1 stat</li>
          </ul>
        </section>

        <section id="example-builds" class="mt-8">
          <h2 class="text-3xl font-bold border-b border-slate-700 pb-2">üõ† Example Builds</h2>

          <div class="mt-4">
            <h3 class="text-2xl font-semibold">1. Warrior Build (Melee Focus)</h3>
            <p class="text-slate-400 italic">Goal: Maximize Strength for high melee/bow damage, balanced stamina for survivability.</p>
            <ul class="list-disc text-slate-300 mt-2">
              <li><strong>Strength:</strong> 90 ‚Üí Cost = (50 √ó 1) + (30 √ó 2) + (10 √ó 3) = 120 points</li>
              <li><strong>Dexterity:</strong> 60 ‚Üí Cost = (50 √ó 1) + (10 √ó 2) = 70 points (Stamina = 120)</li>
              <li><strong>Intelligence:</strong> 30 ‚Üí Cost = 30 points</li>
              <li><strong>Psyche:</strong> 50 ‚Üí Cost = 50 points (Mana = 100)</li>
            </ul>
            <p class="font-semibold text-emerald-400 mt-2">‚úÖ Total Cost = 270 points</p>
            <p class="text-slate-400 text-sm">(Fully allocated.)</p>
          </div>

          <div class="mt-6">
            <h3 class="text-2xl font-semibold">2. Mage Build (Magic Focus)</h3>
            <p class="text-slate-400 italic">Goal: Maximize Intelligence & Psyche for magic and mana pool.</p>
            <ul class="list-disc text-slate-300 mt-2">
              <li><strong>Intelligence:</strong> 90 ‚Üí Cost = (50 √ó 1) + (30 √ó 2) + (10 √ó 3) = 120 points</li>
              <li><strong>Psyche:</strong> 80 ‚Üí Cost = (50 √ó 1) + (30 √ó 2) = 110 points (Mana = 160)</li>
              <li><strong>Dexterity:</strong> 20 ‚Üí Cost = 20 points (Stamina = 40)</li>
              <li><strong>Strength:</strong> 20 ‚Üí Cost = 20 points</li>
            </ul>
            <p class="font-semibold text-emerald-400 mt-2">‚úÖ Total Cost = 270 points (fully allocated)</p>
          </div>

          <div class="mt-6">
            <h3 class="text-2xl font-semibold">‚öñÔ∏è Balanced Hybrid Build</h3>
            <ul class="list-disc text-slate-300 mt-2">
              <li><strong>Strength:</strong> 60 ‚Üí Cost = 70 points</li>
              <li><strong>Dexterity:</strong> 55 ‚Üí Cost = 60 points (Stamina = 110)</li>
              <li><strong>Intelligence:</strong> 75 ‚Üí Cost = 100 points</li>
              <li><strong>Psyche:</strong> 40 ‚Üí Cost = 40 points (Mana = 80)</li>
            </ul>
            <p class="font-semibold text-emerald-400 mt-2">‚úÖ Total Cost = 270 points (perfect allocation)</p>
          </div>
        </section>

        <section id="combat-system" class="mt-8">
          <h2 class="text-3xl font-bold border-b border-slate-700 pb-2">Combat System ‚Äì Summary</h2>

          <h3 class="text-2xl font-semibold mt-4">0) Tunable Knobs</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>MSF (Mass Stamina Factor):</strong> 1.0 stamina / kg</li>
            <li><strong>BlockFailPenalty (wrong direction):</strong> 25% incoming damage</li>
            <li><strong>RangedBlockPenalty (arrows/bolts, non-directional):</strong> 50% incoming damage</li>
            <li><strong>Block Arc:</strong> 180¬∞ frontal</li>
            <li><strong>Parry Immunity:</strong> 0.5 s, melee weapon attacks only</li>
            <li><strong>Riposte State:</strong> Grants 50% damage reduction only if the player is in an attack state. Buff halves charge & swing times (full damage still). UI indicator.</li>
            <li><strong>Lockout:</strong> Triggered when player attempts to block. If no attack is blocked within 1.5 s ‚Üí return to idle + 2 s reblock penalty. Dropping block early still incurs the 2 s penalty.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">1) Weapon Model</h3>
          <ul class="list-disc text-slate-300">
            <li>Two parts: Shaft/Hilt (handle) + Weapon Head (blade, spike, hammer, etc.).</li>
            <li>Mass = Shaft/Hilt + Head.</li>
            <li>Damage types: Blunt (from total weapon mass, always present), Slash / Pierce (from head only).</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">2) Attack Directions</h3>
          <ul class="list-disc text-slate-300">
            <li>Directions: Left, Right, Up, Down.</li>
            <li>Each weapon has a direction table mapping attack direction ‚Üí damage type(s).</li>
            <li>Example (Sword): Left, Right, Up ‚Üí Slash; Down ‚Üí Pierce.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">3) Special Weapons</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Lance (mounted-only):</strong> No ready/swing cycle. Full damage on contact. Damage = (Blunt + Pierce) √ó PlayerStrength √ó MountSpeedFactor. Shield = 0 damage always.</li>
            <li><strong>Bow:</strong> Pierce only. Draw Weight replaces Player Strength. No weapon mass contribution. Hold limit removed ‚Üí drains stamina continuously.</li>
            <li><strong>Crossbow:</strong> Same as bow but lower draw power and no hold penalty.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">4) Timing, Charge & Anti-Acceleration</h3>
          <ul class="list-disc text-slate-300">
            <li>Swing duration: 1.0 s (neutral ‚Üí pre-release)</li>
            <li>Hold limit (melee only): 3.0 s, then reset to neutral</li>
            <li>Charge multiplier (linear): ‚â§0.5 s ‚Üí 0 damage; 0.5‚Äì1.0 s ‚Üí (charge ‚àí 0.5)/0.5; 1.0 s ‚Üí 1.0</li>
            <li>Anti-acceleration cutoff: If swing < 0.6 s ‚Üí 0 damage, otherwise multiplier = swing completion %</li>
            <li>Riposte timing tweak: Halves charge & swing times, still full damage. Anti-accel cutoff halved (0.3 s).</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">5) Damage Formulas</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Melee:</strong> PlayerStrength √ó (Blunt + Slash/Pierce) √ó ChargeMult √ó SwingMult.</li>
            <li><strong>Bow / Crossbow:</strong> DrawWeight √ó Pierce √ó ChargeMult √ó SwingMult.</li>
            <li><strong>Lance:</strong> (Blunt + Pierce) √ó PlayerStrength √ó MountSpeedFactor.</li>
            <li>Post-calculation rule: All float damage values floored to integers.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">6) Defense</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Shield:</strong> Always nullifies incoming damage.</li>
            <li><strong>Directional Block:</strong> Correct direction ‚Üí 0 damage, +30 stamina. Wrong direction ‚Üí 25% damage.</li>
            <li><strong>Non-directional attacks:</strong> Lance vs shield ‚Üí 0 damage. Bow/Crossbow vs block ‚Üí 50% damage.</li>
            <li><strong>Parry:</strong> 0.5 s immunity vs melee. Opens Riposte.</li>
            <li><strong>Riposte:</strong> 2 s buff, 50% damage reduction while attacking, halved attack times.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">7) Stamina</h3>
          <ul class="list-disc text-slate-300">
            <li><strong>Attack costs:</strong> Light: 20, Medium: 30, Heavy: 40. TotalCost = Base + (MSF √ó mass).</li>
            <li><strong>Defense costs:</strong> Block: 20, Parry: 20.</li>
            <li><strong>Exhaustion:</strong> If stamina < 0 ‚Üí stunned 2 s, doubled regen.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">8) Heavy Attacks</h3>
          <ul class="list-disc text-slate-300">
            <li>If landed ‚Üí target gets Dazed (no Riposte, suspended recovery, doubled costs).</li>
            <li>Attacker cannot perform another heavy for 3 s.</li>
          </ul>

          <h3 class="text-2xl font-semibold mt-6">9) Damage & Weapon Data Rules</h3>
           <ul class="list-disc text-slate-300">
            <li>On crafting: Calculate and save Blunt, Slash, Pierce damage values.</li>
            <li>Runtime: Combat uses stored integer values for performance.</li>
          </ul>

        </section>

      </main>
    </div>
  </div>
</body>
</html>
